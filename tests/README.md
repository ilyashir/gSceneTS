# Тесты для приложения gSceneTS

В этой директории содержатся модульные и функциональные тесты для приложения gSceneTS. Тесты используют библиотеку `unittest` Python и модуль `QTest` из PyQt6 для тестирования UI-компонентов.

## Запуск тестов

### Запуск всех тестов

Для запуска всех тестов используйте команду:

```bash
python run_tests.py --all
```

или просто:

```bash
python run_tests.py
```

### Запуск конкретных тестов

Для запуска конкретных тестов укажите их имена в командной строке:

```bash
python run_tests.py shortcuts field wall
```

### Доступные тесты

- `shortcuts` - Тесты горячих клавиш
- `field` - Тесты для виджета поля
- `wall` - Тесты для стен
- `robot` - Тесты для робота
- `region` - Тесты для регионов
- `mouse` - Тесты событий мыши
- `ui` - Тесты UI-взаимодействий

### Опции командной строки

- `--all` - Запустить все тесты
- `--no-color` - Отключить цветной вывод

### Цветной вывод

Для улучшения читаемости результатов тестов используется цветной вывод с помощью пакета `colorama`. Цветной вывод добавляет следующие индикаторы:

- `[✓]` - Зеленым цветом для успешных тестов
- `[✗]` - Красным цветом для ошибок и неудачных тестов
- `[S]` - Синим цветом для пропущенных тестов

Чтобы включить эту функцию, установите пакет:

```bash
pip install colorama
```

Цветной вывод можно отключить с помощью опции `--no-color`:

```bash
python run_tests.py --no-color
```

## Структура тестов

- `test_shortcuts.py` - Тесты горячих клавиш и масштабирования
- `test_field_widget.py` - Тесты для основного виджета поля
- `test_wall.py` - Тесты для создания и редактирования стен
- `test_robot.py` - Тесты для робота
- `test_region.py` - Тесты для регионов
- `test_mouse_events.py` - Тесты обработки событий мыши
- `test_ui_interactions.py` - Тесты взаимодействия UI-компонентов
- `conftest.py` - Общие фикстуры и настройки для тестов

## Запуск тестов через IDE

Большинство современных IDE (PyCharm, VSCode и др.) имеют встроенную поддержку тестов Python. Вы можете использовать функциональность IDE для запуска и отладки отдельных тестов или тестовых классов.

## Примечания

- Для запуска тестов PyQt требуется графическое окружение. При запуске в CI/CD-системах нужно использовать виртуальный дисплей (например, Xvfb для Linux).
- Тесты могут быть чувствительны к времени выполнения. Если тесты периодически проваливаются, попробуйте увеличить таймауты или добавить дополнительные паузы.
- Логирование в тестах отключено для более чистого вывода. Если нужно видеть логи, уберите строку `logging.disable(logging.CRITICAL)` в начале тестовых файлов.

## Требования

Для запуска тестов необходимы следующие библиотеки:
- PyQt6
- pytest
- colorama (опционально, для цветного вывода)

Установка зависимостей:

```bash
pip install -r requirements.txt
```

Или установить только необходимые для тестов пакеты:

```bash
pip install PyQt6 pytest colorama
``` 